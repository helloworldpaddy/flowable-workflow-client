<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <!-- Update test user passwords with correct BCrypt hash -->
    <changeSet id="test-003-update-test-user-passwords" author="cms-test">
        <comment>Update test user password hashes - BCrypt hash for 'password123'</comment>
        
        <sql>
            -- Use a known working BCrypt hash for "password123"
            UPDATE cms_flowable_workflow.users 
            SET password_hash = '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iEqSYCGJSIzQgDPnMxvT2HCHWdHW'
            WHERE username = 'admin';
        </sql>

        <rollback>
            <sql>
                UPDATE cms_flowable_workflow.users 
                SET password_hash = '$2a$12$CwTycUXWue0Thq9StjUM0uBUm5VMEyQGT5pk7CQTSQZqjzrTC4yTC'
                WHERE username IN ('testadmin', 'testhr', 'testlegal', 'testcsis');
            </sql>
        </rollback>
    </changeSet>

</databaseChangeLog>